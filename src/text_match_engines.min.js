(function(){window.DTM_ExactMatcher=function(){function t(){this.distinct=!0,this.caseSensitive=!1}return t.prototype.setDistinct=function(t){return this.distinct=t},t.prototype.setCaseSensitive=function(t){return this.caseSensitive=t},t.prototype.search=function(t,e){var i,n,s,r,h=this;for(s=e.length,r=[],n=0,this.caseSensitive||(t=t.toLowerCase(),e=e.toLowerCase());(i=t.indexOf(e))>-1;)(function(){return r.push({start:n+i,end:n+i+s}),h.distinct?(t=t.substr(i+s),n+=i+s):(t=t.substr(i+1),n+=i+1)})();return r},t}(),window.DTM_RegexMatcher=function(){function t(){this.caseSensitive=!1}return t.prototype.setCaseSensitive=function(t){return this.caseSensitive=t},t.prototype.search=function(t,e){var i,n,s;for(n=RegExp(e,this.caseSensitive?"g":"gi"),s=[];i=n.exec(t);)s.push({start:i.index,end:i.index+i[0].length});return s},t}(),window.DTM_DMPMatcher=function(){function t(){this.dmp=new diff_match_patch,this.dmp.Diff_Timeout=0,this.caseSensitive=!1}return t.prototype._reverse=function(t){return t.split("").reverse().join("")},t.prototype.getMaxPatternLength=function(){return this.dmp.Match_MaxBits},t.prototype.setMatchDistance=function(t){return this.dmp.Match_Distance=t},t.prototype.getMatchDistance=function(){return this.dmp.Match_Distance},t.prototype.setMatchThreshold=function(t){return this.dmp.Match_Threshold=t},t.prototype.getMatchThreshold=function(){return this.dmp.Match_Threshold},t.prototype.getCaseSensitive=function(){return caseSensitive},t.prototype.setCaseSensitive=function(t){return this.caseSensitive=t},t.prototype.search=function(t,e,i,n){var s,r,h,o,a,c,f,d,u,p,l,v,m,_;if(null==i&&(i=0),null==n&&(n={}),0>i)throw Error("Can't search at negative indices!");return this.caseSensitive||(t=t.toLowerCase(),e=e.toLowerCase()),u=e.length,d=this.getMaxPatternLength(),d>=u?p=this.searchForSlice(t,e,i):(_=e.substr(0,d),m=this.searchForSlice(t,_,i),null!=m&&(v=m.end-m.start,a=e.substr(u-d,d),h=m.start+u-d,o=this.searchForSlice(t,a,h),null!=o&&(r=o.end-o.start,f=o.end-m.start,l=m.start,s=o.end,f>=.5*u&&1.5*u>=f&&(p={start:l,end:o.end})))),null==p?[]:((n.withLevenhstein||n.withDiff)&&(c=t.substr(p.start,p.end-p.start),p.diff=this.dmp.diff_main(e,c),n.withLevenshstein&&(p.lev=this.dmp.diff_levenshtein(p.diff)),n.withDiff&&(this.dmp.diff_cleanupSemantic(p.diff),p.diffHTML=this.dmp.diff_prettyHtml(p.diff))),[p])},t.prototype.compare=function(t,e){var i;if(null==t||null==e)throw Error("Can not compare non-existing strings!");return i={},i.diff=this.dmp.diff_main(t,e),i.lev=this.dmp.diff_levenshtein(i.diff),i.errorLevel=i.lev/t.length,this.dmp.diff_cleanupSemantic(i.diff),i.diffHTML=this.dmp.diff_prettyHtml(i.diff),i},t.prototype.searchForSlice=function(t,e,i){var n,s,r,h,o,a,c,f,d,u;return a=this.dmp.match_main(t,e,i),d=a.index,-1===d?null:(u=this._reverse(t),o=this._reverse(e),h=d+e.length,r=t.length-h,c=this.dmp.match_main(u,o,r),n=c.index,s=t.length-n,f={start:d,end:s})},t}()}).call(this);